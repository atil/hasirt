<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>hello phaser!</title>
        <link rel="stylesheet" href="style.css">
        <script src="phaser-2.6.2/build/phaser.min.js"></script>
        <script src="wave.js"></script>
    </head>
    <body>

    <script type="text/javascript">

    window.onload = function() {

        var game = new Phaser.Game(window.screen.availWidth, window.screen.availHeight, Phaser.AUTO, '', 
            { preload: preload, create: create, update: update });
		var cursors;
        var player1;
        var player2;

        var wave;

        function preload () {

            game.rect = {
                x: game.world.centerX,
                y: game.world.centerY,
                width: game.width,
                height: game.height,
            }

            game.load.image('logo', 'assets/phaser.png');
            game.load.image('yellow', 'assets/yellow.png');
            game.load.image('red', 'assets/red.png');
            game.load.image('blue', 'assets/blue.png');

            preloadWave(game);

            cursors = game.input.keyboard.createCursorKeys();
        }

        function create () {

            var logo = game.add.sprite(game.rect.x, game.rect.y, 'logo');
            logo.anchor.setTo(0.5, 0.5);

            player1 = game.add.sprite(0, 0, 'yellow');
            player1.position.setTo(player1.width / 2, game.rect.y);
            player1.anchor.setTo(0.5, 0.5);

            player2 = game.add.sprite(0, 0, 'red');
            player2.position.setTo(game.rect.width - player2.width / 2, game.rect.y);
            player2.anchor.setTo(0.5, 0.5);

            wave = initWave(game);

            game.input.keyboard.addKey(Phaser.Keyboard.A).onDown.add(function() {

            });

        }
		
		function update() {
            var dt = game.time.elapsed / 1000;
            
            updateWave(wave, dt);
		}

    };

    </script>

    </body>
</html>